"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[142],{777:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"classify-section"},[e("el-button",{staticClass:"add-classify",attrs:{type:"primary"},on:{click:function(e){t.dialogAddFormVisible=!0}}},[t._v(" 添加分类 ")]),e("el-dialog",{attrs:{"modal-append-to-body":!1,title:"添加分类",visible:t.dialogAddFormVisible},on:{"update:visible":function(e){t.dialogAddFormVisible=e}}},[e("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.formRules}},[e("el-form-item",{attrs:{prop:"name",label:"分类名称","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"300px"},attrs:{type:"text",autocomplete:"off"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name","string"===typeof e?e.trim():e)},expression:"addForm.name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogAddFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("addForm")}}},[t._v(" 确 定 ")])],1)],1),e("div",{staticClass:"classify-search"},[e("el-input",{staticClass:"search-input",attrs:{size:"40px",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search="string"===typeof e?e.trim():e},expression:"search"}},[e("el-button",{staticClass:"search-btn",attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.classifyFilter},slot:"append"},[t._v(" 搜索 ")])],1)],1),e("div",{staticClass:"classify-list"},[[e("el-table",{attrs:{data:t.tableData,height:"80vh",border:""}},[e("el-table-column",{attrs:{prop:"id",label:"id"}}),e("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(e){return t.toEdit(a.row)}}},[t._v(" 编辑 ")]),e("el-dialog",{attrs:{"modal-append-to-body":!1,title:"编辑分类",visible:t.dialogEditFormVisible},on:{"update:visible":function(e){t.dialogEditFormVisible=e}}},[e("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.formRules}},[e("el-form-item",{attrs:{prop:"name",label:"分类名称","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"300px"},attrs:{type:"text",autocomplete:"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name","string"===typeof e?e.trim():e)},expression:"editForm.name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogEditFormVisible=!1}}},[t._v(" 取 消 ")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("editForm")}}},[t._v(" 确 定 ")])],1)],1),e("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteRow(a.row.id)}}},[t._v(" 删除 ")])]}}])})],1)]],2)],1)},i=[],o=a(7970),r={data(){return{dialogAddFormVisible:!1,dialogEditFormVisible:!1,addForm:{name:""},editForm:{name:"",id:""},formRules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},formLabelWidth:"130px",search:"",tableData:[]}},created(){this.classify()},watch:{search(){this.classify()}},methods:{classify(){o.Z.classify().then((t=>{this.tableData=t}))},toEdit(t){this.editForm.id=t.id,this.editForm.name=t.name,this.dialogEditFormVisible=!0},submitForm(t){this.$refs[t].validate((e=>{if(e)if("editForm"==t){const t=this.editForm.id,e={...this.editForm};o.Z.updateClassify(t,e).then((()=>{alert("编辑成功！"),this.dialogEditFormVisible=!1,this.classify()}))}else if("addForm"==t){const t={...this.addForm};o.Z.addClassify(t).then((()=>{alert("添加成功！"),this.dialogAddFormVisible=!1,this.addForm.name="",this.classify()}))}}))},classifyFilter(){const t=this.search,e=this.tableData.filter((e=>{let a="";for(let t in e)a=a+e[t]+",";return a.includes(t)}));this.tableData=e},deleteRow(t){const e=confirm("删除后数据将不可恢复，请确认！");e&&(o.Z.deleteClassify(t),this.classify())}}},l=r,n=a(1001),d=(0,n.Z)(l,s,i,!1,null,"617c2800",null),c=d.exports},7970:function(t,e,a){var s=a(7962);const i={classify(){return s.Z.get("/classify").then((t=>t))},addClassify(t){return s.Z.post("/classify",t).then((t=>t))},updateClassify(t,e){return s.Z.put("/classify/"+t,e).then((t=>t))},deleteClassify(t){return s.Z["delete"]("/classify/"+t).then((t=>t))}};e["Z"]=i},7962:function(t,e,a){var s=a(8499),i=a(6265),o=a.n(i);o().defaults.timeout=2e4,o().defaults.baseURL="/api",o().interceptors.request.use((t=>t),(t=>Promise.reject(t)));const r=t=>{const{response:e}=t,a=e?e.status:408;if(e){const{data:i}=e,{errors:o}=i,r=i.message||"服务器发送错误，请稍后再试";401===a?(console.log("没有登录"),localStorage.clear(),sessionStorage.clear(),window.location.reload(),console.log(t)):419===a?(console.log("页面过期"),localStorage.clear(),sessionStorage.clear(),window.location.reload()):422===a||423===a||429===a?Object.keys(o).forEach((t=>{const e=o[t].join("\n");s.Message.error(e)})):s.Message.error(r)}else s.Message.error("网络超时")};o().interceptors.response.use((t=>{switch(!0){case t.data&&200===t.data.code:return t.data.data;case t.data&&200!==t.data.code:return t.data.data?(s.Message.error(t.data.data),Promise.reject(t.data.data)):(s.Message.error(t.data),Promise.reject(t.data));default:return t.data}}),(t=>(r(t),Promise.reject(t)))),e["Z"]={post(t="",e={},a={}){return o().post(t,e,a)},put(t="",e={},a={}){return o().put(t,e,a)},get(t="",e={},a={}){const s=Object.assign({params:e},a);return o().get(t,s)},delete(t="",e={},a={}){const s=Object.assign({params:e},a);return o()["delete"](t,s)}}}}]);
//# sourceMappingURL=theclassify.b8fdb0d1.js.map